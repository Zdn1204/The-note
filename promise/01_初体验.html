<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <button id="btn">点我抽奖</button>
    <script>

        const rand = (m,n)=>{
            return Math.ceil(Math.random() * (n-m+1)) + m - 1;
        }

        const btn = document.querySelector('#btn');

        btn.addEventListener('click',function(){
            //定时器
            /* setTimeout(()=>{
                let n = rand(1,100);
                if(n<=30){
                    alert("恭喜你，中奖了！");
                }else{
                    alert("真遗憾~再来一次吧！");
                }
            },1000) */

            //Promise 形式实现
            //resolve 解决 函数类型数据
            //reject 拒绝 函数类型数据
            const p = new Promise((resolve,reject) => {
                setTimeout(()=>{
                    let n = rand(1,100);
                    if(n<=30){
                        // alert("恭喜你，中奖了！");
                        resolve(n);//将promise对象的状态设置为“成功”
                    }else{
                        // alert("真遗憾~再来一次吧！");
                        reject(n);//将promise对象的状态设置为“失败”
                    }
                },1000)
            });

            //调用then方法
            p.then((value)=>{
                alert("恭喜你，中奖了！您的中奖数字为"+value);
            },(reason)=>{
                alert("真遗憾~再来一次吧！您的号码为"+reason);
            });
        })
    </script>
</body>
</html>